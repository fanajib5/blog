---
layout: layouts/base.njk
---
{% block content %}
<section class="archive-page">
  <header class="page-header">
    <h1 class="page-title">{{ title }}</h1>
    {% if description %}
    <p class="page-description">{{ description }}</p>
    {% endif %}
  </header>

  {% include "partials/blog-search.njk" %}
  {% include "partials/tag-filter.njk" %}

  <div class="post-list">
    {% set posts = collections.writing %}

    {% if posts.length == 0 %}
    <p>Belum ada artikel.</p>
    {% else %}

    {# Group posts by year #}
    {% set currentYear = null %}

    {% for post in posts %}
      {% set postYear = post.date.getFullYear() %}

      {% if postYear != currentYear %}
        {% if currentYear != null %}</ul>{% endif %}
        {% set currentYear = postYear %}
        <h2 class="year-heading">{{ currentYear }}</h2>
        <ul class="posts-in-year">
      {% endif %}

      <li class="post-item">
        <time datetime="{{ post.date | dateFormat('iso') }}">
          {{ post.date | dateFormat('short') }}
        </time>
        <div class="post-content-wrapper">
          <a href="{{ post.url }}">{{ post.data.title }}</a>
          <div class="post-meta">
            <span class="reading-time">{{ post.templateContent | readingTime }}</span>
          </div>
          {% if post.data.description %}
          <p class="post-description">{{ post.data.description }}</p>
          {% endif %}
          {% if post.data.tags %}
          <div class="post-tags">
            {% for tag in post.data.tags %}
            <span class="tag">{{ tag }}</span>
            {% endfor %}
          </div>
          {% endif %}
        </div>
      </li>
    {% endfor %}
    </ul>
    {% endif %}
  </div>
</section>
{% endblock %}
